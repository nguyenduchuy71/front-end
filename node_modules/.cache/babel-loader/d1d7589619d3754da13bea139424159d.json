{"ast":null,"code":"import _regeneratorRuntime from\"E:/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{USER_SIGNUP_FAIL,USER_SIGNUP_REQUEST,USER_SIGNUP_SUCCESS,USER_SIGNIN_FAIL,USER_SIGNIN_REQUEST,USER_SIGNIN_SUCCESS}from\"../constants/userConstants\";import Cookie from\"js-cookie\";import Axios from\"axios\";var signup=function signup(user){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var _yield$Axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:USER_SIGNUP_REQUEST,payload:user});_context.prev=1;_context.next=4;return Axios.post(\"/account/\",user);case 4:_yield$Axios$post=_context.sent;data=_yield$Axios$post.data;dispatch({type:USER_SIGNUP_SUCCESS,payload:true});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);dispatch({type:USER_SIGNUP_FAIL,payload:_context.t0.message});case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function(_x){return _ref.apply(this,arguments);};}();};var signin=function signin(username,password){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var _yield$Axios$get,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:USER_SIGNIN_REQUEST,payload:{username:username,password:password}});_context2.prev=1;_context2.next=4;return Axios.get(\"/account/\",{params:{username:username,password:password}});case 4:_yield$Axios$get=_context2.sent;data=_yield$Axios$get.data;dispatch({type:USER_SIGNIN_SUCCESS,payload:data.user});Cookie.set(\"access_token\",data.access_token);Cookie.set(\"userInfo\",JSON.stringify(data.user));_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](1);dispatch({type:USER_SIGNIN_FAIL,payload:_context2.t0.message});case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[1,11]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export{signup,signin};","map":{"version":3,"sources":["E:/front-end/src/actions/userActions.js"],"names":["USER_SIGNUP_FAIL","USER_SIGNUP_REQUEST","USER_SIGNUP_SUCCESS","USER_SIGNIN_FAIL","USER_SIGNIN_REQUEST","USER_SIGNIN_SUCCESS","Cookie","Axios","signup","user","dispatch","type","payload","post","data","message","signin","username","password","get","params","set","access_token","JSON","stringify"],"mappings":"mQAAA,OACEA,gBADF,CAEEC,mBAFF,CAGEC,mBAHF,CAIEC,gBAJF,CAKEC,mBALF,CAMEC,mBANF,KAOO,4BAPP,CAQA,MAAOC,CAAAA,MAAP,KAAmB,WAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACC,IAAD,iGAAU,iBAAOC,QAAP,6IACvBA,QAAQ,CAAC,CAAEC,IAAI,CAAEV,mBAAR,CAA6BW,OAAO,CAAEH,IAAtC,CAAD,CAAR,CADuB,sCAGEF,CAAAA,KAAK,CAACM,IAAN,CAAW,WAAX,CAAwBJ,IAAxB,CAHF,wCAGbK,IAHa,mBAGbA,IAHa,CAIrBJ,QAAQ,CAAC,CAAEC,IAAI,CAAET,mBAAR,CAA6BU,OAAO,CAAE,IAAtC,CAAD,CAAR,CAJqB,+EAMrBF,QAAQ,CAAC,CAAEC,IAAI,CAAEX,gBAAR,CAA0BY,OAAO,CAAE,YAAMG,OAAzC,CAAD,CAAR,CANqB,oEAAV,gEAAf,CAUA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACC,QAAD,CAAWC,QAAX,kGAAwB,kBAAOR,QAAP,gJACrCA,QAAQ,CAAC,CAAEC,IAAI,CAAEP,mBAAR,CAA6BQ,OAAO,CAAE,CAAEK,QAAQ,CAARA,QAAF,CAAYC,QAAQ,CAARA,QAAZ,CAAtC,CAAD,CAAR,CADqC,wCAGZX,CAAAA,KAAK,CAACY,GAAN,CAAU,WAAV,CAAuB,CAC5CC,MAAM,CAAE,CACNH,QAAQ,CAAEA,QADJ,CAENC,QAAQ,CAAEA,QAFJ,CADoC,CAAvB,CAHY,wCAG3BJ,IAH2B,kBAG3BA,IAH2B,CASnCJ,QAAQ,CAAC,CAAEC,IAAI,CAAEN,mBAAR,CAA6BO,OAAO,CAAEE,IAAI,CAACL,IAA3C,CAAD,CAAR,CACAH,MAAM,CAACe,GAAP,CAAW,cAAX,CAA2BP,IAAI,CAACQ,YAAhC,EACAhB,MAAM,CAACe,GAAP,CAAW,UAAX,CAAuBE,IAAI,CAACC,SAAL,CAAeV,IAAI,CAACL,IAApB,CAAvB,EAXmC,qFAanCC,QAAQ,CAAC,CAAEC,IAAI,CAAER,gBAAR,CAA0BS,OAAO,CAAE,aAAMG,OAAzC,CAAD,CAAR,CAbmC,uEAAxB,kEAAf,CAiBA,OAASP,MAAT,CAAiBQ,MAAjB","sourcesContent":["import {\r\n  USER_SIGNUP_FAIL,\r\n  USER_SIGNUP_REQUEST,\r\n  USER_SIGNUP_SUCCESS,\r\n  USER_SIGNIN_FAIL,\r\n  USER_SIGNIN_REQUEST,\r\n  USER_SIGNIN_SUCCESS,\r\n} from \"../constants/userConstants\";\r\nimport Cookie from \"js-cookie\";\r\nimport Axios from \"axios\";\r\n\r\nconst signup = (user) => async (dispatch) => {\r\n  dispatch({ type: USER_SIGNUP_REQUEST, payload: user });\r\n  try {\r\n    const { data } = await Axios.post(\"/account/\", user);\r\n    dispatch({ type: USER_SIGNUP_SUCCESS, payload: true });\r\n  } catch (error) {\r\n    dispatch({ type: USER_SIGNUP_FAIL, payload: error.message });\r\n  }\r\n};\r\n\r\nconst signin = (username, password) => async (dispatch) => {\r\n  dispatch({ type: USER_SIGNIN_REQUEST, payload: { username, password } });\r\n  try {\r\n    const { data } = await Axios.get(\"/account/\", {\r\n      params: {\r\n        username: username,\r\n        password: password,\r\n      },\r\n    });\r\n    dispatch({ type: USER_SIGNIN_SUCCESS, payload: data.user });\r\n    Cookie.set(\"access_token\", data.access_token);\r\n    Cookie.set(\"userInfo\", JSON.stringify(data.user));\r\n  } catch (error) {\r\n    dispatch({ type: USER_SIGNIN_FAIL, payload: error.message });\r\n  }\r\n};\r\n\r\nexport { signup, signin };\r\n"]},"metadata":{},"sourceType":"module"}