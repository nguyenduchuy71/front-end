{"ast":null,"code":"import _regeneratorRuntime from\"E:/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import\"./ForumDetailScreen.css\";import PersonOutlineIcon from\"@material-ui/icons/PersonOutline\";import DateRangeIcon from\"@material-ui/icons/DateRange\";import Button from\"@material-ui/core/Button\";import TextField from\"@material-ui/core/TextField\";import{useSelector}from\"react-redux\";import{useHistory}from\"react-router-dom\";import axios from\"axios\";import{useDispatch}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ForumDetailScreen(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),cmt=_useState2[0],setCmt=_useState2[1];var userSignin=useSelector(function(state){return state.userSignin;});var loading=userSignin.loading,userInfo=userSignin.userInfo,error=userSignin.error;var history=useHistory();var dispatch=useDispatch();var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),responses=_useState4[0],setResponses=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),input=_useState6[0],setInput=_useState6[1];var submitHandle=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:case\"end\":return _context.stop();}}},_callee);}));return function submitHandle(){return _ref.apply(this,arguments);};}();useEffect(function(){/*     axios.get(\"/account/check-login/\", {headers:{Authorization: 'Bearer '+localStorage.getItem('token')}} )\r\n    .then((res) => {\r\n      if(res.status===200){\r\n        axios.get(\"/forum/\", {headers:{Authorization: 'Bearer '+localStorage.getItem('token')}} )\r\n        .then((res) => {\r\n          if(res.status===200){\r\n            const rs=res.data.find(item => item.id=== parseInt(props.match.params.id))\r\n            setCmt(rs);\r\n            setResponses(rs.comment);\r\n          }\r\n        }).catch((error) => console.log(error.message));\r\n      }\r\n    }).catch((error) => { dispatch(logout()); history.push('/signin')}); */},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"forumdetail\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"forum__detail__content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"list__info__author\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"item__author content_title\",children:cmt===null||cmt===void 0?void 0:cmt.title}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list__infor__content item__author\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"infor__content username\",children:[/*#__PURE__*/_jsx(PersonOutlineIcon,{className:\"icon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"name__author\",children:cmt===null||cmt===void 0?void 0:cmt.user})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"infor__content postdate\",children:[/*#__PURE__*/_jsx(DateRangeIcon,{className:\"icon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"date__post\",children:cmt===null||cmt===void 0?void 0:cmt.date.split(\"T\")[0]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"list__responde\",children:responses.map(function(res){return/*#__PURE__*/_jsxs(\"div\",{className:\"item__responde row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"left col-lg-3 col-md-2 col-sm-12\",children:/*#__PURE__*/_jsx(\"img\",{className:\"avartar__author__responde\",src:userInfo===null||userInfo===void 0?void 0:userInfo.avatar,alt:\"img\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"center col-lg-6 col-md-8 col-sm-12\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text__author__responde\",children:res.content})}),/*#__PURE__*/_jsxs(\"div\",{className:\"right col-lg-3 col-md-2 col-sm-12\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"time__author__responde\",children:res.date}),/*#__PURE__*/_jsx(Button,{className:\"bnt__reply\",variant:\"contained\",size:\"small\",color:\"secondary\",onClick:function onClick(){setInput(\"@:\".concat(res.user,\" \"));},children:\"Reply\"})]})]},res.id);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row post_comment\",children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,value:input,id:\"cmt__post\",placeholder:\"Nh\\u1EADp b\\xECnh lu\\u1EADn\",variant:\"outlined\",size:\"small\",className:\"col-lg-8 col-md-6 col-sm-12 input__cmt__post\",onChange:function onChange(e){return setInput(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"col-lg-1 col-md-12 col-sm-12\"}),/*#__PURE__*/_jsx(Button,{className:\"col-lg-1 col-md-6 col-sm-12 btn__post__cmt\",variant:\"contained\",size:\"small\",color:\"primary\",onClick:submitHandle,children:\"Post\"})]})]})});}export default ForumDetailScreen;","map":{"version":3,"sources":["E:/front-end/src/screens/ForumDetailScreen.js"],"names":["React","useState","useEffect","PersonOutlineIcon","DateRangeIcon","Button","TextField","useSelector","useHistory","axios","useDispatch","ForumDetailScreen","props","cmt","setCmt","userSignin","state","loading","userInfo","error","history","dispatch","responses","setResponses","input","setInput","submitHandle","title","user","date","split","map","res","avatar","content","id","e","target","value"],"mappings":"sYAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAO,yBAAP,CACA,MAAOC,CAAAA,iBAAP,KAA8B,kCAA9B,CACA,MAAOC,CAAAA,aAAP,KAA0B,8BAA1B,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,aAA5B,C,wFAEA,QAASC,CAAAA,iBAAT,CAA2BC,KAA3B,CAAkC,CAChC,cAAsBX,QAAQ,EAA9B,wCAAOY,GAAP,eAAYC,MAAZ,eACA,GAAMC,CAAAA,UAAU,CAAGR,WAAW,CAAC,SAACS,KAAD,QAAWA,CAAAA,KAAK,CAACD,UAAjB,EAAD,CAA9B,CACA,GAAQE,CAAAA,OAAR,CAAqCF,UAArC,CAAQE,OAAR,CAAiBC,QAAjB,CAAqCH,UAArC,CAAiBG,QAAjB,CAA2BC,KAA3B,CAAqCJ,UAArC,CAA2BI,KAA3B,CACA,GAAMC,CAAAA,OAAO,CAAGZ,UAAU,EAA1B,CACA,GAAMa,CAAAA,QAAQ,CAAGX,WAAW,EAA5B,CACA,eAAkCT,QAAQ,CAAC,EAAD,CAA1C,yCAAOqB,SAAP,eAAkBC,YAAlB,eACA,eAA0BtB,QAAQ,CAAC,EAAD,CAAlC,yCAAOuB,KAAP,eAAcC,QAAd,eACA,GAAMC,CAAAA,YAAY,0FAAG,kLAAH,kBAAZA,CAAAA,YAAY,0CAAlB,CAqBAxB,SAAS,CAAC,UAAM,CACd;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2EACG,CAdQ,CAcN,EAdM,CAAT,CAeA,mBACE,YAAK,SAAS,CAAC,aAAf,uBACE,aAAK,SAAS,CAAC,wBAAf,wBACE,aAAK,SAAS,CAAC,oBAAf,wBACE,UAAG,SAAS,CAAC,4BAAb,UAA2CW,GAA3C,SAA2CA,GAA3C,iBAA2CA,GAAG,CAAEc,KAAhD,EADF,cAEE,YAAI,SAAS,CAAC,mCAAd,wBACE,YAAI,SAAS,CAAC,yBAAd,wBACE,KAAC,iBAAD,EAAmB,SAAS,CAAC,MAA7B,EADF,cAEE,aAAM,SAAS,CAAC,cAAhB,UAAgCd,GAAhC,SAAgCA,GAAhC,iBAAgCA,GAAG,CAAEe,IAArC,EAFF,GADF,cAKE,YAAI,SAAS,CAAC,yBAAd,wBACE,KAAC,aAAD,EAAe,SAAS,CAAC,MAAzB,EADF,cAEE,aAAM,SAAS,CAAC,YAAhB,UAA8Bf,GAA9B,SAA8BA,GAA9B,iBAA8BA,GAAG,CAAEgB,IAAL,CAAUC,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAA9B,EAFF,GALF,GAFF,GADF,cAcE,YAAK,SAAS,CAAC,gBAAf,UACGR,SAAS,CAACS,GAAV,CAAc,SAACC,GAAD,CAAS,CACtB,mBACE,aAAkB,SAAS,CAAC,oBAA5B,wBACE,YAAK,SAAS,CAAC,kCAAf,uBACE,YACE,SAAS,CAAC,2BADZ,CAEE,GAAG,CAAEd,QAAF,SAAEA,QAAF,iBAAEA,QAAQ,CAAEe,MAFjB,CAGE,GAAG,CAAC,KAHN,EADF,EADF,cAQE,YAAK,SAAS,CAAC,oCAAf,uBACE,UAAG,SAAS,CAAC,wBAAb,UAAuCD,GAAG,CAACE,OAA3C,EADF,EARF,cAWE,aAAK,SAAS,CAAC,mCAAf,wBACE,aAAM,SAAS,CAAC,wBAAhB,UAA0CF,GAAG,CAACH,IAA9C,EADF,cAEE,KAAC,MAAD,EACE,SAAS,CAAC,YADZ,CAEE,OAAO,CAAC,WAFV,CAGE,IAAI,CAAC,OAHP,CAIE,KAAK,CAAC,WAJR,CAKE,OAAO,CAAE,kBAAM,CACbJ,QAAQ,aAAMO,GAAG,CAACJ,IAAV,MAAR,CACD,CAPH,mBAFF,GAXF,GAAUI,GAAG,CAACG,EAAd,CADF,CA4BD,CA7BA,CADH,EAdF,cA8CE,aAAK,SAAS,CAAC,kBAAf,wBACE,KAAC,SAAD,EACE,SAAS,KADX,CAEE,KAAK,CAAEX,KAFT,CAGE,EAAE,CAAC,WAHL,CAIE,WAAW,CAAC,6BAJd,CAKE,OAAO,CAAC,UALV,CAME,IAAI,CAAC,OANP,CAOE,SAAS,CAAC,8CAPZ,CAQE,QAAQ,CAAE,kBAACY,CAAD,QAAOX,CAAAA,QAAQ,CAACW,CAAC,CAACC,MAAF,CAASC,KAAV,CAAf,EARZ,EADF,cAWE,aAAM,SAAS,CAAC,8BAAhB,EAXF,cAYE,KAAC,MAAD,EACE,SAAS,CAAC,4CADZ,CAEE,OAAO,CAAC,WAFV,CAGE,IAAI,CAAC,OAHP,CAIE,KAAK,CAAC,SAJR,CAKE,OAAO,CAAEZ,YALX,kBAZF,GA9CF,GADF,EADF,CAyED,CAED,cAAef,CAAAA,iBAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"./ForumDetailScreen.css\";\r\nimport PersonOutlineIcon from \"@material-ui/icons/PersonOutline\";\r\nimport DateRangeIcon from \"@material-ui/icons/DateRange\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nfunction ForumDetailScreen(props) {\r\n  const [cmt, setCmt] = useState();\r\n  const userSignin = useSelector((state) => state.userSignin);\r\n  const { loading, userInfo, error } = userSignin;\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const [responses, setResponses] = useState([]);\r\n  const [input, setInput] = useState(\"\");\r\n  const submitHandle = async () => {\r\n    /*     if (user) {\r\n      if(input!==\"\"){\r\n        const data ={\r\n          \"id_post\":cmt.id,\r\n          \"content\":input,\r\n          \"date\":Date().toLocaleString()\r\n        }\r\n        await axios.post(\"/forum/comment/\", data, {headers:{Authorization: 'Bearer '+localStorage.getItem('token')}})\r\n        .then((res) => {\r\n          if(res.status===200){\r\n            setResponses([...responses,res.data]);\r\n            setInput(\"\");\r\n          }\r\n        }).catch((error) => {console.log(error)});\r\n      }\r\n      else{\r\n        alert(\"Bạn chưa nhập thông tin\");\r\n      }\r\n    }  */\r\n  };\r\n  useEffect(() => {\r\n    /*     axios.get(\"/account/check-login/\", {headers:{Authorization: 'Bearer '+localStorage.getItem('token')}} )\r\n    .then((res) => {\r\n      if(res.status===200){\r\n        axios.get(\"/forum/\", {headers:{Authorization: 'Bearer '+localStorage.getItem('token')}} )\r\n        .then((res) => {\r\n          if(res.status===200){\r\n            const rs=res.data.find(item => item.id=== parseInt(props.match.params.id))\r\n            setCmt(rs);\r\n            setResponses(rs.comment);\r\n          }\r\n        }).catch((error) => console.log(error.message));\r\n      }\r\n    }).catch((error) => { dispatch(logout()); history.push('/signin')}); */\r\n  }, []);\r\n  return (\r\n    <div className=\"forumdetail\">\r\n      <div className=\"forum__detail__content\">\r\n        <div className=\"list__info__author\">\r\n          <p className=\"item__author content_title\">{cmt?.title}</p>\r\n          <ul className=\"list__infor__content item__author\">\r\n            <li className=\"infor__content username\">\r\n              <PersonOutlineIcon className=\"icon\"></PersonOutlineIcon>\r\n              <span className=\"name__author\">{cmt?.user}</span>\r\n            </li>\r\n            <li className=\"infor__content postdate\">\r\n              <DateRangeIcon className=\"icon\"></DateRangeIcon>\r\n              <span className=\"date__post\">{cmt?.date.split(\"T\")[0]}</span>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <div className=\"list__responde\">\r\n          {responses.map((res) => {\r\n            return (\r\n              <div key={res.id} className=\"item__responde row\">\r\n                <div className=\"left col-lg-3 col-md-2 col-sm-12\">\r\n                  <img\r\n                    className=\"avartar__author__responde\"\r\n                    src={userInfo?.avatar}\r\n                    alt=\"img\"\r\n                  />\r\n                </div>\r\n                <div className=\"center col-lg-6 col-md-8 col-sm-12\">\r\n                  <p className=\"text__author__responde\">{res.content}</p>\r\n                </div>\r\n                <div className=\"right col-lg-3 col-md-2 col-sm-12\">\r\n                  <span className=\"time__author__responde\">{res.date}</span>\r\n                  <Button\r\n                    className=\"bnt__reply\"\r\n                    variant=\"contained\"\r\n                    size=\"small\"\r\n                    color=\"secondary\"\r\n                    onClick={() => {\r\n                      setInput(`@:${res.user} `);\r\n                    }}\r\n                  >\r\n                    Reply\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n        <div className=\"row post_comment\">\r\n          <TextField\r\n            fullWidth\r\n            value={input}\r\n            id=\"cmt__post\"\r\n            placeholder=\"Nhập bình luận\"\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            className=\"col-lg-8 col-md-6 col-sm-12 input__cmt__post\"\r\n            onChange={(e) => setInput(e.target.value)}\r\n          />\r\n          <span className=\"col-lg-1 col-md-12 col-sm-12\"></span>\r\n          <Button\r\n            className=\"col-lg-1 col-md-6 col-sm-12 btn__post__cmt\"\r\n            variant=\"contained\"\r\n            size=\"small\"\r\n            color=\"primary\"\r\n            onClick={submitHandle}\r\n          >\r\n            Post\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ForumDetailScreen;\r\n"]},"metadata":{},"sourceType":"module"}